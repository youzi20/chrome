(()=>{var e=function(){this.selectDom=null,this.maskDiv=null,this.eventListener()};
/*!*********************************************!*\
  !*** ./src/js/document/injected-collect.ts ***!
  \*********************************************/e.prototype.getText=function(){return this.selectDom.innerText},e.prototype.getImages=function(){var t=[];return this.selectDom.parentElement.querySelectorAll("img").forEach(function(e){t.push({src:e.src})}),t},e.prototype.createMask=function(){var e,t,i,o;this.selectDom&&(e=(o=this.selectDom.getBoundingClientRect()).left,t=o.top,i=o.width,o=o.height,this.maskDiv||(this.maskDiv=document.createElement("div"),this.maskDiv.style="position: fixed; background: rgba(24, 112, 240, 0.5);pointer-events: none;z-index: 9999999;",document.body.appendChild(this.maskDiv)),this.maskDiv.style.width=i+"px",this.maskDiv.style.height=o+"px",this.maskDiv.style.top=t+"px",this.maskDiv.style.left=e+"px")},e.prototype.onMouseMoveHandle=function(e){var t=e.clientX,e=e.clientY,t=document.elementFromPoint(t,e);this.selectDom&&this.selectDom===t||(this.selectDom=t,this.createMask())},e.prototype.onClickHandle=function(e){var t,i=this,e=(e.preventDefault(),e.stopPropagation(),{text:this.getText(),images:this.getImages()}),o=window.location.host.replace(/\./gi,"_")+"_"+Date.now();console.log(o,e),chrome.storage.sync.set(((t={})[o]=e,t),function(){window.postMessage({ticker:"document-injected-script",storageKey:o},"*"),i.dispose()})},e.prototype.eventListener=function(){this._onMouseMoveHandle=this.onMouseMoveHandle.bind(this),this._onClickHandle=this.onClickHandle.bind(this),window.addEventListener("mousemove",this._onMouseMoveHandle),window.addEventListener("click",this._onClickHandle)},e.prototype.dispose=function(){e=null,this.maskDiv.remove(),window.removeEventListener("mousemove",this._onMouseMoveHandle),window.removeEventListener("click",this._onClickHandle)},new e})();